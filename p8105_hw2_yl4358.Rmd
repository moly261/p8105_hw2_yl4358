---
title: "p8105_hw2_yl4358"
author: "YI LIU"
date: "9/30/2019"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

# Problem 1

## Read and clean the Mr. Trash Wheel sheet

```{r}
mr_trash_wheel = 
  readxl::read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N338") %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>%
  mutate(
   sports_balls = round(sports_balls, digit = 0),
   sports_balls = as.integer(sports_balls)
  ) 
```

## Read and clean precipitation data for 2017 and 2018

```{r}
prep_2018 = 
  readxl::read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = "2018 Precipitation", range = "A2:B15") %>%
  janitor::clean_names() %>% 
  mutate(year = "2018") %>% 
  drop_na(month, total)

prep_2017 = 
  readxl::read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = "2017 Precipitation", range = "A2:B15") %>%
  janitor::clean_names() %>% 
  mutate(year = "2017") %>% 
  drop_na(month, total)

prep_df = 
  bind_rows(prep_2017, prep_2018) %>% 
  mutate(
    month = month.name[month]
  ) 

```


* the number of observations in `mr_trash_wheel` dataset is `r length(pull(mr_trash_wheel, dumpster))`, and the the number of observations in `prep_df` dataset is `r length(pull(prep_df, month))`.

*Key variables are `weight tons`, `total precipitation`, `dumpster`, `month` and `year`.

*Total precipitation in 2018 is `r sum(pull(filter(prep_df, year == 2018), total))` inches. The median number of sports balls in a dumpster in 2017 is `r median(pull(filter(mr_trash_wheel, year == 2017), sports_balls))`.


# Problem 2


## clean the data in pols-month.csv

```{r}
pols_month = 
  read_csv("./data/fivethirtyeight_datasets/pols-month.csv") %>% 
  janitor::clean_names() %>%
  separate(col = mon, into = c("year", "month", "day"), sep = "-") %>% 
  mutate(
    month = as.numeric(month),
    month = month.name[month],
   president = ifelse(prez_gop == 0, "dem", "gop")
  ) %>% 
  select(-prez_gop, -prez_dem, -day) 

```

## clean the data in snp.csv

```{r}
snp_df = 
  read_csv("./data/fivethirtyeight_datasets/snp.csv") %>% 
  janitor::clean_names() %>%
  separate(col = date, into = c("month", "day", "year"), sep = "/") %>% 
  arrange(year, month) %>% 
  select(year, month, everything()) %>% 
  mutate(
    month = as.numeric(month),
    month = month.name[month]
  ) %>% 
  select(-day)
```